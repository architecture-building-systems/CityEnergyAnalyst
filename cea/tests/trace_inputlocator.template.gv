
{% if scripts|length > 1 %}
digraph trace_inputlocator {
    rankdir="LR";
    node [shape=box, style=filled, fillcolor=peachpuff]
    graph [overlap = false];

    {% for script in scripts %}
    "{{script}}"[style=filled, fillcolor=darkorange];
    {% endfor %}

    {% for direction, script, locator, path, file in trace_data %}
        {% if loop.changed(direction, script, path) %}
            {% if direction == 'input' %}
    "{{path}}" -> "{{script}}"
            {% else %}
    "{{script}}" -> "{{path}}"
            {% endif %}
        {% endif %}
    {% endfor %}
}

{% else %}

digraph trace_inputlocator {
    rankdir="LR";
    node [shape=box];
    graph [overlap = false];

    {% for script in scripts %}
    "{{script}}"[style=filled, fillcolor=darkorange];
    {% endfor %}

    {% for direction, script, locator, path, file in trace_data %}
        {% if direction == 'input' %}
    "{{file}}" -> "{{script}}"[label="{{locator}}"]
        {% else %}
    "{{script}}" -> "{{file}}"[label="{{locator}}"]
        {% endif %}
    {% endfor %}

    {% for db in range(0, db_group|length) %}
    subgraph cluster_{{db}} {
        style = filled;
        color = peachpuff;
        label="{{db_group[db]}}";
        {% for direction, script, locator, path, file in trace_data %}
        {% if path == db_group[db] %}
    "{{file}}"[style=filled, color=white]
        {% endif %}
        {% endfor %}
    }
    {% endfor %}
    }
{% endif %}